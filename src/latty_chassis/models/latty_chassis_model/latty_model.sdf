<?xml version="1.0" ?>
<sdf version="1.6">
  <model name="latty_chassis">
    <static>false</static> <!-- must be false for drive plugin control -->

    <!-- Base link -->
    <link name="base_link">
      <pose>0 0 0.2 0 0 0</pose> <!-- slightly above ground -->

      <visual name="visual">
        <geometry>
          <box>
            <size>0.6 1.0 0.4</size>
          </box>
        </geometry>
        <material>
          <ambient>0.1 0.1 0.8 1</ambient>
          <diffuse>0.1 0.1 0.8 1</diffuse>
        </material>
      </visual>

      <collision name="collision">
        <geometry>
          <box>
            <size>0.6 1.0 0.4</size>
          </box>
        </geometry>
      </collision>
    </link>

    <!-- Left wheel -->
    <link name="left_wheel_link">
      <pose>0.3 0.25 0.1 0 0 0</pose>

      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>0.075</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </visual>

      <collision name="collision">
        <geometry>
          <cylinder>
            <radius>0.075</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </collision>
    </link>

    <!-- Right wheel -->
    <link name="right_wheel_link">
      <pose>0.3 -0.25 0.1 0 0 0</pose>

      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>0.075</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </visual>

      <collision name="collision">
        <geometry>
          <cylinder>
            <radius>0.075</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </collision>
    </link>

    <!-- Left wheel joint -->
    <joint name="left_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>left_wheel_link</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1000</lower>
          <upper>1000</upper>
        </limit>
      </axis>
    </joint>

    <!-- Right wheel joint -->
    <joint name="right_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>right_wheel_link</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1000</lower>
          <upper>1000</upper>
        </limit>
      </axis>
    </joint>

    <!-- Differential Drive Plugin -->
    <gazebo>
      <plugin name="diff_drive_controller" filename="libgazebo_ros_diff_drive.so">
        <ros>
          <namespace>/latty_chassis</namespace>
          <remapping>cmd_vel:=cmd_vel</remapping>
        </ros>
        <update_rate>100</update_rate>

        <left_joint>left_wheel_joint</left_joint>
        <right_joint>right_wheel_joint</right_joint>

        <wheel_separation>0.5</wheel_separation> <!-- Distance between wheels -->
        <wheel_diameter>0.15</wheel_diameter>     <!-- Wheel diameter -->

        <command_topic>cmd_vel</command_topic>
        <odometry_topic>odom</odometry_topic>
        <publish_odom>true</publish_odom>
        <publish_odom_tf>true</publish_odom_tf>
        <publish_wheel_tf>true</publish_wheel_tf>
        <publish_wheel_joint_state>true</publish_wheel_joint_state>
      </plugin>
    </gazebo>

  </model>
</sdf>
